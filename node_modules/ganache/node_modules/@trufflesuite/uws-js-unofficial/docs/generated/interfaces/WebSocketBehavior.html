<!DOCTYPE html><html class="default no-js"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>WebSocketBehavior | uWebSockets.js v20.4.0 documentation</title><meta name="description" content="Documentation for uWebSockets.js v20.4.0 documentation"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">uWebSockets.js v20.4.0 documentation</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../index.html">uWebSockets.js v20.4.0 documentation</a></li><li><a href="WebSocketBehavior.html">WebSocketBehavior</a></li></ul><h1>Interface WebSocketBehavior</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>A structure holding settings and handlers for a WebSocket URL route handler.</p>
</div></div></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">WebSocketBehavior</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-interface"><a href="WebSocketBehavior.html#compression" class="tsd-kind-icon">compression</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="WebSocketBehavior.html#idleTimeout" class="tsd-kind-icon">idle<wbr/>Timeout</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="WebSocketBehavior.html#maxBackpressure" class="tsd-kind-icon">max<wbr/>Backpressure</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="WebSocketBehavior.html#maxPayloadLength" class="tsd-kind-icon">max<wbr/>Payload<wbr/>Length</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="WebSocketBehavior.html#sendPingsAutomatically" class="tsd-kind-icon">send<wbr/>Pings<wbr/>Automatically</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#close" class="tsd-kind-icon">close</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#drain" class="tsd-kind-icon">drain</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#message" class="tsd-kind-icon">message</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#open" class="tsd-kind-icon">open</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#ping" class="tsd-kind-icon">ping</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#pong" class="tsd-kind-icon">pong</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#upgrade" class="tsd-kind-icon">upgrade</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="compression" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> compression</h3><div class="tsd-signature tsd-kind-icon">compression<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/uNetworking/uWebSockets.js/blob/master/docs/index.d.ts#L224">index.d.ts:224</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>What permessage-deflate compression to use. uWS.DISABLED, uWS.SHARED_COMPRESSOR or any of the uWS.DEDICATED_COMPRESSOR_xxxKB. Defaults to uWS.DISABLED.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="idleTimeout" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> idle<wbr/>Timeout</h3><div class="tsd-signature tsd-kind-icon">idle<wbr/>Timeout<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/uNetworking/uWebSockets.js/blob/master/docs/index.d.ts#L222">index.d.ts:222</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Maximum amount of seconds that may pass without sending or getting a message. Connection is closed if this timeout passes. Resolution (granularity) for timeouts are typically 4 seconds, rounded to closest.
Disable by using 0. Defaults to 120.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="maxBackpressure" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> max<wbr/>Backpressure</h3><div class="tsd-signature tsd-kind-icon">max<wbr/>Backpressure<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/uNetworking/uWebSockets.js/blob/master/docs/index.d.ts#L226">index.d.ts:226</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Maximum length of allowed backpressure per socket when publishing or sending messages. Slow receivers with too high backpressure will be skipped until they catch up or timeout. Defaults to 1024 * 1024.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="maxPayloadLength" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> max<wbr/>Payload<wbr/>Length</h3><div class="tsd-signature tsd-kind-icon">max<wbr/>Payload<wbr/>Length<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/uNetworking/uWebSockets.js/blob/master/docs/index.d.ts#L218">index.d.ts:218</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Maximum length of received message. If a client tries to send you a message larger than this, the connection is immediately closed. Defaults to 16 * 1024.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="sendPingsAutomatically" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> send<wbr/>Pings<wbr/>Automatically</h3><div class="tsd-signature tsd-kind-icon">send<wbr/>Pings<wbr/>Automatically<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/uNetworking/uWebSockets.js/blob/master/docs/index.d.ts#L228">index.d.ts:228</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Whether or not we should automatically send pings to uphold a stable connection given whatever idleTimeout.</p>
</div></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="close" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> close</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">close<span class="tsd-signature-symbol">(</span>ws<span class="tsd-signature-symbol">: </span><a href="WebSocket.html" class="tsd-signature-type" data-tsd-kind="Interface">WebSocket</a>, code<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span>, message<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">ArrayBuffer</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/uNetworking/uWebSockets.js/blob/master/docs/index.d.ts#L240">index.d.ts:240</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Handler for close event, no matter if error, timeout or graceful close. You may not use WebSocket after this event. Do not send on this WebSocket from within here, it is closed.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>ws: <a href="WebSocket.html" class="tsd-signature-type" data-tsd-kind="Interface">WebSocket</a></h5></li><li><h5>code: <span class="tsd-signature-type">number</span></h5></li><li><h5>message: <span class="tsd-signature-type">ArrayBuffer</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="drain" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> drain</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">drain<span class="tsd-signature-symbol">(</span>ws<span class="tsd-signature-symbol">: </span><a href="WebSocket.html" class="tsd-signature-type" data-tsd-kind="Interface">WebSocket</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/uNetworking/uWebSockets.js/blob/master/docs/index.d.ts#L238">index.d.ts:238</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Handler for when WebSocket backpressure drains. Check ws.getBufferedAmount(). Use this to guide / drive your backpressure throttling.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>ws: <a href="WebSocket.html" class="tsd-signature-type" data-tsd-kind="Interface">WebSocket</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="message" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> message</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">message<span class="tsd-signature-symbol">(</span>ws<span class="tsd-signature-symbol">: </span><a href="WebSocket.html" class="tsd-signature-type" data-tsd-kind="Interface">WebSocket</a>, message<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">ArrayBuffer</span>, isBinary<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/uNetworking/uWebSockets.js/blob/master/docs/index.d.ts#L236">index.d.ts:236</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Handler for a WebSocket message. Messages are given as ArrayBuffer no matter if they are binary or not. Given ArrayBuffer is valid during the lifetime of this callback (until first await or return) and will be neutered.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>ws: <a href="WebSocket.html" class="tsd-signature-type" data-tsd-kind="Interface">WebSocket</a></h5></li><li><h5>message: <span class="tsd-signature-type">ArrayBuffer</span></h5></li><li><h5>isBinary: <span class="tsd-signature-type">boolean</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="open" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> open</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">open<span class="tsd-signature-symbol">(</span>ws<span class="tsd-signature-symbol">: </span><a href="WebSocket.html" class="tsd-signature-type" data-tsd-kind="Interface">WebSocket</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/uNetworking/uWebSockets.js/blob/master/docs/index.d.ts#L234">index.d.ts:234</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Handler for new WebSocket connection. WebSocket is valid from open to close, no errors.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>ws: <a href="WebSocket.html" class="tsd-signature-type" data-tsd-kind="Interface">WebSocket</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="ping" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> ping</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">ping<span class="tsd-signature-symbol">(</span>ws<span class="tsd-signature-symbol">: </span><a href="WebSocket.html" class="tsd-signature-type" data-tsd-kind="Interface">WebSocket</a>, message<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">ArrayBuffer</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/uNetworking/uWebSockets.js/blob/master/docs/index.d.ts#L242">index.d.ts:242</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Handler for received ping control message. You do not need to handle this, pong messages are automatically sent as per the standard.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>ws: <a href="WebSocket.html" class="tsd-signature-type" data-tsd-kind="Interface">WebSocket</a></h5></li><li><h5>message: <span class="tsd-signature-type">ArrayBuffer</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="pong" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> pong</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">pong<span class="tsd-signature-symbol">(</span>ws<span class="tsd-signature-symbol">: </span><a href="WebSocket.html" class="tsd-signature-type" data-tsd-kind="Interface">WebSocket</a>, message<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">ArrayBuffer</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/uNetworking/uWebSockets.js/blob/master/docs/index.d.ts#L244">index.d.ts:244</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Handler for received pong control message.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>ws: <a href="WebSocket.html" class="tsd-signature-type" data-tsd-kind="Interface">WebSocket</a></h5></li><li><h5>message: <span class="tsd-signature-type">ArrayBuffer</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="upgrade" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> upgrade</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">upgrade<span class="tsd-signature-symbol">(</span>res<span class="tsd-signature-symbol">: </span><a href="HttpResponse.html" class="tsd-signature-type" data-tsd-kind="Interface">HttpResponse</a>, req<span class="tsd-signature-symbol">: </span><a href="HttpRequest.html" class="tsd-signature-type" data-tsd-kind="Interface">HttpRequest</a>, context<span class="tsd-signature-symbol">: </span><a href="us_socket_context_t.html" class="tsd-signature-type" data-tsd-kind="Interface">us_socket_context_t</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/uNetworking/uWebSockets.js/blob/master/docs/index.d.ts#L232">index.d.ts:232</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Upgrade handler used to intercept HTTP upgrade requests and potentially upgrade to WebSocket.
See UpgradeAsync and UpgradeSync example files.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>res: <a href="HttpResponse.html" class="tsd-signature-type" data-tsd-kind="Interface">HttpResponse</a></h5></li><li><h5>req: <a href="HttpRequest.html" class="tsd-signature-type" data-tsd-kind="Interface">HttpRequest</a></h5></li><li><h5>context: <a href="us_socket_context_t.html" class="tsd-signature-type" data-tsd-kind="Interface">us_socket_context_t</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../index.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-interface"><a href="WebSocketBehavior.html" class="tsd-kind-icon">Web<wbr/>Socket<wbr/>Behavior</a><ul><li class="tsd-kind-property tsd-parent-kind-interface"><a href="WebSocketBehavior.html#compression" class="tsd-kind-icon">compression</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="WebSocketBehavior.html#idleTimeout" class="tsd-kind-icon">idle<wbr/>Timeout</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="WebSocketBehavior.html#maxBackpressure" class="tsd-kind-icon">max<wbr/>Backpressure</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="WebSocketBehavior.html#maxPayloadLength" class="tsd-kind-icon">max<wbr/>Payload<wbr/>Length</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="WebSocketBehavior.html#sendPingsAutomatically" class="tsd-kind-icon">send<wbr/>Pings<wbr/>Automatically</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#close" class="tsd-kind-icon">close</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#drain" class="tsd-kind-icon">drain</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#message" class="tsd-kind-icon">message</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#open" class="tsd-kind-icon">open</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#ping" class="tsd-kind-icon">ping</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#pong" class="tsd-kind-icon">pong</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="WebSocketBehavior.html#upgrade" class="tsd-kind-icon">upgrade</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>